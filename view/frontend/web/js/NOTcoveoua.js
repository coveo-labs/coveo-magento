!function(e,t){window.coveoua=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function e(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o,t,g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function y(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function m(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function w(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(t=o=o||{}).search="search",t.click="click",t.custom="custom",t.view="view",t.collect="collect";var n=(i.prototype.sendEvent=function(h,v){return m(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,f;return w(this,function(e){switch(e.label){case 0:return t=this.opts,n=t.baseUrl,r=t.visitorIdProvider,o=t.preprocessRequest,this.shouldAppendVisitorId(h)?[4,this.getVisitorIdParam()]:[3,2];case 1:return i=e.sent(),[3,3];case 2:i="",e.label=3;case 3:return s={url:n+"/analytics/"+h+i,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(v)},l=[g({},s)],o?[4,o(s,"analyticsFetch")]:[3,5];case 4:return p=e.sent(),[3,6];case 5:p={},e.label=6;case 6:return a=g.apply(void 0,l.concat([p])),u=a.url,c=y(a,["url"]),[4,fetch(u,c)];case 7:return(d=e.sent()).ok?[4,d.json()]:[3,9];case 8:return(f=e.sent()).visitorId&&r.setCurrentVisitorId(f.visitorId),[2,f];case 9:try{d.json()}catch(e){}throw console.error('An error has occured when sending the "'+h+'" event.',d,v),new Error('An error has occurred when sending the "'+h+'" event. Check the console logs for more details.')}})})},i.prototype.shouldAppendVisitorId=function(e){return-1!==[o.click,o.custom,o.search,o.view].indexOf(e)},i.prototype.getVisitorIdParam=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return[4,this.opts.visitorIdProvider.getCurrentVisitorId()];case 1:return[2,(t=e.sent())?"?visitor="+t:""]}})})},i.prototype.getHeaders=function(){var e=this.opts.token;return g(g({},e?{Authorization:"Bearer "+e}:{}),{"Content-Type":"application/json"})},i);function i(e){this.opts=e}function s(){return"undefined"!=typeof navigator}function u(){return"undefined"!=typeof document}function c(){return"undefined"!=typeof localStorage}function l(){return s()&&navigator.cookieEnabled}function p(){return"undefined"!=typeof crypto&&void 0!==crypto.getRandomValues}var d=[o.click,o.custom,o.search,o.view],f=(h.set=function(e,t,n){var r,o,i,s,a;s=n?((i=new Date).setTime(i.getTime()+n),"; expires="+i.toGMTString()):"",-1===(a=location.hostname).indexOf(".")?document.cookie=e+"="+t+s+"; path=/":((o=a.split(".")).shift(),r="."+o.join("."),document.cookie=e+"="+t+s+"; path=/; domain="+r,null!=h.get(e)&&h.get(e)==t||(r="."+a,document.cookie=e+"="+t+s+"; path=/; domain="+r))},h.get=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r];if(0==(o=o.replace(/^\s+/,"")).indexOf(t))return o.substring(t.length,o.length)}return null},h.erase=function(e){h.set(e,"",-1)},h);function h(){}function v(){return c()?localStorage:l()?new E:"undefined"!=typeof sessionStorage?sessionStorage:new C}var E=(b.prototype.getItem=function(e){return f.get(""+b.prefix+e)},b.prototype.removeItem=function(e){f.erase(""+b.prefix+e)},b.prototype.setItem=function(e,t){f.set(""+b.prefix+e,t)},b.prefix="coveo_",b);function b(){}var S=(I.prototype.getItem=function(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)},I.prototype.removeItem=function(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)},I.prototype.setItem=function(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)},I);function I(){this.cookieStorage=new E}var C=(P.prototype.getItem=function(e){return null},P.prototype.removeItem=function(e){},P.prototype.setItem=function(e,t){},P);function P(){}var k=Object.freeze({__proto__:null,preferredStorage:null,getAvailableStorage:v,CookieStorage:E,CookieAndLocalStorage:S,NullStorage:C}),A="__coveo.analytics.history",T=(x.prototype.addElement=function(e){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);var t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])},x.prototype.addElementAsync=function(n){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return n.internalTime=(new Date).getTime(),this.cropQueryElement(n),[4,this.getHistoryWithInternalTimeAsync()];case 1:return null!=(t=e.sent())?this.isValidEntry(n)&&this.setHistory([n].concat(t)):this.setHistory([n]),[2]}})})},x.prototype.getHistory=function(){var e=this.getHistoryWithInternalTime();return this.stripInternalTime(e)},x.prototype.getHistoryAsync=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return[4,this.getHistoryWithInternalTimeAsync()];case 1:return t=e.sent(),[2,this.stripInternalTime(t)]}})})},x.prototype.getHistoryWithInternalTime=function(){try{var e=this.store.getItem(A);return e&&"string"==typeof e?JSON.parse(e):[]}catch(e){return[]}},x.prototype.getHistoryWithInternalTimeAsync=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.store.getItem(A)];case 1:return(t=e.sent())?[2,JSON.parse(t)]:[2,[]];case 2:return e.sent(),[2,[]];case 3:return[2]}})})},x.prototype.setHistory=function(e){try{this.store.setItem(A,JSON.stringify(e.slice(0,20)))}catch(e){}},x.prototype.clear=function(){try{this.store.removeItem(A)}catch(e){}},x.prototype.getMostRecentElement=function(){var e=this.getHistoryWithInternalTime();return null==e?null:e.sort(function(e,t){return(t.internalTime||0)-(e.internalTime||0)})[0]},x.prototype.cropQueryElement=function(e){e.name&&"query"==e.name.toLowerCase()&&null!=e.value&&(e.value=e.value.slice(0,75))},x.prototype.isValidEntry=function(e){var t=this.getMostRecentElement();return!t||t.value!=e.value||6e4<(e.internalTime||0)-(t.internalTime||0)},x.prototype.stripInternalTime=function(e){return e.map(function(e){return{name:e.name,time:e.time,value:e.value}})},x);function x(e){this.store=e||v()}function O(e){return-1!==ie.indexOf(e)}function R(e){return"custom"===e}var F=Object.freeze({__proto__:null,STORE_KEY:A,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,MAX_VALUE_SIZE:75,HistoryStore:T,default:T}),V=function(r){return m(void 0,void 0,void 0,function(){var t,n;return w(this,function(e){switch(e.label){case 0:return t=new T,n={name:"PageView",value:r,time:JSON.stringify(new Date)},[4,t.addElementAsync(n)];case 1:return e.sent(),[2]}})})},q=function(e){return e?(Number(e)^_(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):(""+1e7+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,q)},_=function(e){if(p())return crypto.getRandomValues(e);for(var t=0,n=0;t<e.length;t++)0==(3&t)&&(n=4294967296*Math.random()),e[t]=n>>>((3&t)<<3)&255;return e},L=Object.keys,D={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},j=a(L(D).map(function(e){return D[e]})).join("|"),N=new RegExp("^("+j+"$)"),H=[function(e){return N.test(e)}],M={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps"},U={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr"},B=g(g({},{action:"pa",list:"pal",listSource:"pls"}),{id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"}),Q=function(o,i,s,a){return L(o).reduce(function(e,t){var n,r="il"+(i+1)+a+(s+1)+(U[t]||t);return g(g({},e),((n={})[r]=o[t],n))},{})},z=L(M).map(function(e){return M[e]}),Y=L(U).map(function(e){return U[e]}),W=a(z,["custom"]).join("|"),G=a(Y,["custom"]).join("|"),K="(pr[0-9]+)",J="(il[0-9]+pi[0-9]+)",$=new RegExp("^"+K+"("+W+")$"),X=new RegExp("^("+J+"("+G+"))|(il[0-9]+nm)$"),Z=new RegExp("^"+K+"custom$"),ee=new RegExp("^"+J+"custom$"),te=[function(e){return X.test(e)},function(e){return $.test(e)}],ne=[Z,ee],re=g(g(g({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),oe=g(g(g({},re),B),{svcAction:"svc_action",svcActionData:"svc_action_data"}),ie=L(oe).map(function(e){return oe[e]}),se=function(n){var r=void 0;return a(ne).every(function(e){var t;return r=null===(t=e.exec(n))||void 0===t?void 0:t[1],!Boolean(r)}),r},ae=function(r,o){return L(o).reduce(function(e,t){var n;return g(g({},e),((n={})[""+r+t]=o[t],n))},{})},ue=(ce.prototype.sendEvent=function(d,f){return m(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return w(this,function(e){switch(e.label){case 0:if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');return t=this.opts,n=t.baseUrl,r=t.preprocessRequest,o=this.encodeForEventType(d,f),[4,this.getQueryParamsForEventType(d)];case 1:return i=e.sent(),s={url:n+"/analytics/"+d+"?"+i,body:new Blob([o],{type:"application/x-www-form-urlencoded"})},l=[g({},s)],r?[4,r(s,"analyticsBeacon")]:[3,3];case 2:return p=e.sent(),[3,4];case 3:p={},e.label=4;case 4:return a=g.apply(void 0,l.concat([p])),u=a.url,c=a.body,console.log('Sending beacon for "'+d+'" with: ',JSON.stringify(f)),navigator.sendBeacon(u,c),[2]}})})},ce.prototype.encodeForEventType=function(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(g({access_token:this.opts.token},t))},ce.prototype.getQueryParamsForEventType=function(o){return m(this,void 0,void 0,function(){var t,n,r;return w(this,function(e){switch(e.label){case 0:return t=this.opts,n=t.token,[4,t.visitorIdProvider.getCurrentVisitorId()];case 1:return r=e.sent(),[2,[n&&this.isEventTypeLegacy(o)?"access_token="+n:"",r?"visitorId="+r:"","discardVisitInfo=true"].filter(function(e){return!!e}).join("&")]}})})},ce.prototype.isEventTypeLegacy=function(e){return-1!==[o.click,o.custom,o.search,o.view].indexOf(e)},ce.prototype.encodeForLegacyType=function(e,t){return e+"Event="+encodeURIComponent(JSON.stringify(t))},ce.prototype.encodeForFormUrlEncoded=function(t){var n=this;return Object.keys(t).filter(function(e){return!!t[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n.encodeValue(t[e]))}).join("&")},ce.prototype.encodeValue=function(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)},ce);function ce(e){this.opts=e}var le=(pe.prototype.sendEvent=function(e,t){return m(this,void 0,void 0,function(){return w(this,function(e){return[2,Promise.resolve()]})})},pe);function pe(){}var de=function(e,t){c()&&l()?this.storage=new S:c()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new C),this.beaconClient=new ue(e),window.addEventListener("beforeunload",function(){return t()})},fe=function(e,t){this.storage=t||new C,this.beaconClient=new n(e)},he=function(){this.storage=new C,this.beaconClient=new le};var ve={default:"https://platform.cloud.coveo.com/rest/ua",production:"https://platform.cloud.coveo.com/rest/ua",hipaa:"https://platformhipaa.cloud.coveo.com/rest/ua"},ge=(Object.defineProperty(ye.prototype,"defaultOptions",{get:function(){return{endpoint:ve.default,token:"",version:"v15",beforeSendHooks:[]}},enumerable:!0,configurable:!0}),ye.prototype.initRuntime=function(e){var t=this;return"undefined"!=typeof window&&u()?new de(e,function(){return t.flushBufferWithBeacon()}):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please install @react-native-async-storage/async-storage and instantiate \n        your analytics client as follows:\n        \n        import {ReactNativeRuntime} from 'coveo.analytics/react-native';\n        \n        const analytics = new CoveoAnalytics({\n            ...your options,\n            runtimeEnvironment: new ReactNativeRuntime();\n        })\n    "),new fe(e))},Object.defineProperty(ye.prototype,"analyticsBeaconClient",{get:function(){return this.runtime.beaconClient},enumerable:!0,configurable:!0}),Object.defineProperty(ye.prototype,"storage",{get:function(){return this.runtime.storage},enumerable:!0,configurable:!0}),ye.prototype.determineVisitorId=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storage.getItem("visitorId")];case 1:return[2,e.sent()||q()];case 2:return t=e.sent(),console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),[2,q()];case 3:return[2]}})})},ye.prototype.getCurrentVisitorId=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return this.visitorId?[3,3]:[4,this.determineVisitorId()];case 1:return t=e.sent(),[4,this.setCurrentVisitorId(t)];case 2:e.sent(),e.label=3;case 3:return[2,this.visitorId]}})})},ye.prototype.setCurrentVisitorId=function(t){return m(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return this.visitorId=t,[4,this.storage.setItem("visitorId",t)];case 1:return e.sent(),[2]}})})},Object.defineProperty(ye.prototype,"currentVisitorId",{get:function(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(q()),this.visitorId},set:function(e){this.visitorId=e,this.storage.setItem("visitorId",e)},enumerable:!0,configurable:!0}),ye.prototype.sendEvent=function(d){for(var f=[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];return m(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p=this;return w(this,function(e){switch(e.label){case 0:return t=this.eventTypeMapping[d]||{},r=void 0===(n=t.newEventType)?d:n,i=void 0===(o=t.variableLengthArgumentsNames)?[]:o,a=void 0!==(s=t.addVisitorIdParameter)&&s,c=void 0!==(u=t.usesMeasurementProtocol)&&u,[4,[function(e){return 0<i.length?p.parseVariableArgumentsPayload(i,e):e[0]},function(r){return m(p,void 0,void 0,function(){var t,n;return w(this,function(e){switch(e.label){case 0:return t={},a?[4,this.getCurrentVisitorId()]:[3,2];case 1:return n=e.sent(),[3,3];case 2:n="",e.label=3;case 3:return[2,g.apply(void 0,[(t.visitorId=n,t),r])]}})})},function(e){return c?p.ensureAnonymousUserWhenUsingApiKey(e):e},function(e){return p.beforeSendHooks.reduce(function(n,r){return m(p,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return[4,n];case 1:return t=e.sent(),[4,r(d,t)];case 2:return[2,e.sent()]}})})},e)},function(e){return p.removeEmptyPayloadValues(e,d)},function(e){return p.validateParams(e)},function(e){return c?L(o=e).reduce(function(e,t){var n,r=oe[t]||t;return g(g({},e),((n={})[r]=o[t],n))},{}):e;var o},function(e){return c?p.removeUnknownParameters(e):e},function(e){return c?p.processCustomParameters(e):e}].reduce(function(n,r){return m(p,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return[4,n];case 1:return t=e.sent(),[4,r(t)];case 2:return[2,e.sent()]}})})},Promise.resolve(f))];case 1:return l=e.sent(),this.bufferedRequests.push({eventType:r,payload:l,handled:!1}),[4,this.deferExecution()];case 2:return e.sent(),[4,this.sendFromBufferWithFetch()];case 3:return[2,e.sent()]}})})},ye.prototype.deferExecution=function(){return new Promise(function(e){return setTimeout(e,0)})},ye.prototype.flushBufferWithBeacon=function(){for(;this.hasPendingRequests();){var e=this.bufferedRequests.pop(),t=e.eventType,n=e.payload;this.analyticsBeaconClient.sendEvent(t,n)}},ye.prototype.sendFromBufferWithFetch=function(){return m(this,void 0,void 0,function(){var t,n,r;return w(this,function(e){return(t=this.bufferedRequests.shift())?(n=t.eventType,r=t.payload,[2,this.analyticsFetchClient.sendEvent(n,r)]):[2]})})},ye.prototype.hasPendingRequests=function(){return 0<this.bufferedRequests.length},ye.prototype.clear=function(){this.storage.removeItem("visitorId"),(new T).clear()},ye.prototype.sendSearchEvent=function(t){return m(this,void 0,void 0,function(){return w(this,function(e){return[2,this.sendEvent(o.search,t)]})})},ye.prototype.sendClickEvent=function(t){return m(this,void 0,void 0,function(){return w(this,function(e){return[2,this.sendEvent(o.click,t)]})})},ye.prototype.sendCustomEvent=function(t){return m(this,void 0,void 0,function(){return w(this,function(e){return[2,this.sendEvent(o.custom,t)]})})},ye.prototype.sendViewEvent=function(t){return m(this,void 0,void 0,function(){return w(this,function(e){return[2,this.sendEvent(o.view,t)]})})},ye.prototype.getVisit=function(){return m(this,void 0,void 0,function(){var t;return w(this,function(e){switch(e.label){case 0:return[4,fetch(this.baseUrl+"/analytics/visit")];case 1:return[4,e.sent().json()];case 2:return t=e.sent(),this.visitorId=t.visitorId,[2,t]}})})},ye.prototype.getHealth=function(){return m(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,fetch(this.baseUrl+"/analytics/monitoring/health")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}})})},ye.prototype.registerBeforeSendEventHook=function(e){this.beforeSendHooks.push(e)},ye.prototype.addEventTypeMapping=function(e,t){this.eventTypeMapping[e]=t},ye.prototype.parseVariableArgumentsPayload=function(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];if("string"==typeof i)n[e[r]]=i;else if("object"==typeof i)return g(g({},n),i)}return n},ye.prototype.isKeyAllowedEmpty=function(e,t){var n;return-1!==((n={})[o.search]=["queryText"],(n[e]||[]).indexOf(t))},ye.prototype.removeEmptyPayloadValues=function(r,n){var o=this;return Object.keys(r).filter(function(e){return o.isKeyAllowedEmpty(n,e)||null!=(t=r[e])&&""!==t;var t}).reduce(function(e,t){var n;return g(g({},e),((n={})[t]=r[t],n))},{})},ye.prototype.removeUnknownParameters=function(r){return Object.keys(r).filter(function(e){if(t=e,a(te,H,[O,R]).some(function(e){return e(t)}))return!0;var t;console.log(e,"is not processed by coveoua")}).reduce(function(e,t){var n;return g(g({},e),((n={})[t]=r[t],n))},{})},ye.prototype.processCustomParameters=function(e){var o,t=e.custom,n=y(e,["custom"]),r=this.lowercaseKeys(t),i=L(o=n).reduce(function(e,t){var n,r=se(t);return g(g({},e),r?ae(r,o[t]):((n={})[t]=o[t],n))},{});return g(g({},r),i)},ye.prototype.lowercaseKeys=function(r){return Object.keys(r||{}).reduce(function(e,t){var n;return g(g({},e),((n={})[t.toLowerCase()]=r[t],n))},{})},ye.prototype.validateParams=function(e){var t=e.anonymizeIp,n=y(e,["anonymizeIp"]);return void 0!==t&&-1==["0","false","undefined","null","{}","[]",""].indexOf((""+t).toLowerCase())&&(n.anonymizeIp=1),n},ye.prototype.ensureAnonymousUserWhenUsingApiKey=function(e){var t,n=e.userId,r=y(e,["userId"]);return null!=(t=this.options.token)&&t.startsWith("xx")&&!n?(r.userId="anonymous",r):e},Object.defineProperty(ye.prototype,"baseUrl",{get:function(){var e=this.options,t=e.version,n=e.endpoint,r=-1!==n.indexOf(".cloud.coveo.com");return n+(r?"":"/rest")+"/"+t},enumerable:!0,configurable:!0}),ye);function ye(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=g(g({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[function(t,n){return m(void 0,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return t!==o.view?[3,2]:[4,V(n.contentIdValue)];case 1:return e.sent(),[2,g({location:window.location.toString(),referrer:document.referrer,title:document.title},n)];case 2:return[2,n]}})})},function(e,t){return-1!==d.indexOf(e)?g({language:u()?document.documentElement.lang:"unknown",userAgent:s()?navigator.userAgent:"unknown"},t):t}].concat(this.options.beforeSendHooks),this.eventTypeMapping={};var t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.analyticsFetchClient=new n(t)}function me(e){return e.protocol+"//"+e.hostname+(0===e.pathname.indexOf("/")?e.pathname:"/"+e.pathname)+e.search}var we=Object.freeze({__proto__:null,Version:"v15",Endpoints:ve,CoveoAnalyticsClient:ge,default:ge}),Ee=s()?[!0,"yes","1"].indexOf(navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack):0,be=Object.freeze({__proto__:null,doNotTrack:Ee,default:Ee}),Se={pageview:"pageview",event:"event"},Ie=(Ce.prototype.setAction=function(e,t){this.action=e,this.actionData=t},Ce.prototype.clearData=function(){this.clearPluginData(),this.action=void 0,this.actionData={}},Ce.prototype.getLocationInformation=function(e,t){return e===Se.pageview&&this.updateStateForNewPageView(t),{referrer:this.lastReferrer,location:this.lastLocation}},Ce.prototype.getDefaultContextInformation=function(e){var t={hitType:e,pageViewId:this.pageViewId},n={title:document.title,encoding:document.characterSet},r={screenResolution:screen.width+"x"+screen.height,screenColor:screen.colorDepth+"-bit"},o={language:navigator.language,userAgent:navigator.userAgent},i={time:Date.now().toString(),eventId:this.uuidGenerator()};return g(g(g(g(g({},t),i),r),o),n)},Ce.prototype.updateStateForNewPageView=function(e){this.hasSentFirstPageView&&(this.pageViewId=this.uuidGenerator(),this.lastReferrer=this.lastLocation),e.page?this.lastLocation=""+this.lastLocation.split("/").slice(0,3).join("/")+e.page.replace(/^\/?(.*)$/,"/$1"):this.lastLocation=me(window.location),this.hasSentFirstPageView=!0},Ce);function Ce(e){var t=e.client,n=e.uuidGenerator,r=void 0===n?q:n;this.actionData={},this.client=t,this.uuidGenerator=r,this.pageViewId=r(),this.lastLocation=me(window.location),this.lastReferrer=document.referrer,this.addHooks()}var Pe,ke=g({},Se),Ae=Object.keys(ke).map(function(e){return ke[e]});function Te(e){var t=e.client,n=e.uuidGenerator,r=void 0===n?q:n,o=Pe.call(this,{client:t,uuidGenerator:r})||this;return o.products=[],o.impressions=[],o}var xe,Oe=(e(Te,Pe=Ie),Te.prototype.addHooks=function(){this.addHooksForPageView(),this.addHooksForEvent(),this.addHooksForECEvents()},Te.prototype.addProduct=function(e){this.products.push(e)},Te.prototype.addImpression=function(e){this.impressions.push(e)},Te.prototype.clearPluginData=function(){this.products=[],this.impressions=[]},Te.prototype.addHooksForECEvents=function(){var o=this;this.client.registerBeforeSendEventHook(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return-1!==Ae.indexOf(e)?o.addECDataToPayload(e,r):r})},Te.prototype.addHooksForPageView=function(){this.client.addEventTypeMapping(ke.pageview,{newEventType:o.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})},Te.prototype.addHooksForEvent=function(){this.client.addEventTypeMapping(ke.event,{newEventType:o.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})},Te.prototype.addECDataToPayload=function(e,t){var n=g(g(g(g({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{action:this.action}:{}),this.actionData||{}),r=this.getProductPayload(),o=this.getImpressionPayload();return this.clearData(),g(g(g(g({},o),r),n),t)},Te.prototype.getProductPayload=function(){var t=this;return this.products.map(function(e){return t.assureProductValidity(e)}).reduce(function(e,t,n){return g(g({},e),(i=n,L(o=t).reduce(function(e,t){var n,r="pr"+(i+1)+(M[t]||t);return g(g({},e),((n={})[r]=o[t],n))},{})));var o,i},{})},Te.prototype.getImpressionPayload=function(){var r=this;return this.getImpressionsByList().map(function(e){var t=e.impressions,n=y(e,["impressions"]);return g(g({},n),{impressions:t.map(function(e){return r.assureBaseImpressionValidity(e)})})}).reduce(function(e,t,n){return g(g({},e),function(e,r,o){var t=e.impressions.reduce(function(e,t,n){return g(g({},e),Q(t,r,n,o))},{});return e.listName&&(t["il"+(r+1)+"nm"]=e.listName),t}(t,n,"pi"))},{})},Te.prototype.assureProductValidity=function(e){var t=e.position,n=y(e,["position"]);return void 0!==t&&t<1?(console.warn("The position for product '"+(e.name||e.id)+"' must be greater than 0 when provided."),n):e},Te.prototype.assureBaseImpressionValidity=function(e){var t=e.position,n=y(e,["position"]);return void 0!==t&&t<1?(console.warn("The position for impression '"+(e.name||e.id)+"' must be greater than 0 when provided."),n):e},Te.prototype.getImpressionsByList=function(){return this.impressions.reduce(function(e,t){var n=t.list,r=y(t,["list"]),o=e.find(function(e){return e.listName===n});return o?o.impressions.push(r):e.push({listName:n,impressions:[r]}),e},[])},Te.Id="ec",Te),Re=g({},Se),Fe=Object.keys(Re).map(function(e){return Re[e]});function Ve(e){var t=e.client,n=e.uuidGenerator,r=void 0===n?q:n,o=xe.call(this,{client:t,uuidGenerator:r})||this;return o.ticket={},o}var qe=(e(Ve,xe=Ie),Ve.prototype.addHooks=function(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()},Ve.prototype.setTicket=function(e){this.ticket=e},Ve.prototype.clearPluginData=function(){this.ticket={}},Ve.prototype.addHooksForSVCEvents=function(){var o=this;this.client.registerBeforeSendEventHook(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0];return-1!==Fe.indexOf(e)?o.addSVCDataToPayload(e,r):r})},Ve.prototype.addHooksForPageView=function(){this.client.addEventTypeMapping(Re.pageview,{newEventType:o.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})},Ve.prototype.addHooksForEvent=function(){this.client.addEventTypeMapping(Re.event,{newEventType:o.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})},Ve.prototype.addSVCDataToPayload=function(e,t){var n,r=g(g(g(g({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),0<Object.keys(null!==(n=this.actionData)&&void 0!==n?n:{}).length?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),g(g(g({},o),r),t)},Ve.prototype.getTicketPayload=function(){return o=this.ticket,L(o).filter(function(e){return void 0!==o[e]}).reduce(function(e,t){var n,r=D[t]||t;return g(g({},e),((n={})[r]=o[t],n))},{});var o},Ve.Id="svc",Ve),_e=(Le.prototype.require=function(e,t){var n=this.registeredPluginsMap[e];if(!n)throw new Error('No plugin named "'+e+"\" is currently registered. If you use a custom plugin, use 'provide' first.");this.requiredPlugins[e]=new n(t)},Le.prototype.provide=function(e,t){this.registeredPluginsMap[e]=t},Le.prototype.clearRequired=function(){this.requiredPlugins={}},Le.prototype.execute=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this.requiredPlugins[e];if(!o)throw new Error('The plugin "'+e+'" is not required. Check that you required it on initialization.');var i=o[t];if(!i)throw new Error('The function "'+t+'" does not exists on the plugin "'+e+'".');if("function"!=typeof i)throw new Error('"'+t+'" of the plugin "'+e+'" is not a function.');return i.apply(o,n)},Le.DefaultPlugins=[Oe.Id,qe.Id],Le);function Le(){var e;this.registeredPluginsMap=((e={})[Oe.Id]=Oe,e[qe.Id]=qe,e),this.requiredPlugins={}}var De=(je.prototype.init=function(e,t){var n=this;if(!e)throw new Error("You must pass your token when you call 'init'");if("string"==typeof e?this.client=new ge({token:e,endpoint:this.getEndpoint(t)}):this.isAnalyticsClient(e)&&(this.client=e),!this.client)throw new Error("You must pass either your token or a valid object when you call 'init'");var r={client:this.client};this.plugins.clearRequired(),this.getPluginKeys(t).forEach(function(e){return n.plugins.require(e,r)}),this.client.registerBeforeSendEventHook(function(e,t){return g(g({},t),n.params)})},je.prototype.isAnalyticsClient=function(e){return"object"==typeof e&&void 0!==e.sendEvent},je.prototype.getPluginKeys=function(e){return"string"!=typeof e&&Array.isArray(null==e?void 0:e.plugins)?e.plugins:_e.DefaultPlugins},je.prototype.getEndpoint=function(e){return"string"==typeof e?e||ve.default:null!=e&&e.endpoint?e.endpoint:ve.default},je.prototype.initForProxy=function(e){if(!e)throw new Error("You must pass your endpoint when you call 'initForProxy'");if("string"!=typeof e)throw new Error("You must pass a string as the endpoint parameter when you call 'initForProxy'");this.client=new ge({endpoint:e})},je.prototype.set=function(t,e){var n=this;"string"==typeof t?this.params[t]=e:Object.keys(t).map(function(e){n.params[e]=t[e]})},je.prototype.send=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t.slice(1);if(void 0===this.client)throw new Error("You must call init before sending an event");if(!r)throw new Error('You must provide an event type when calling "send".');return(e=this.client).sendEvent.apply(e,a([r.toLowerCase()],o))},je.prototype.onLoad=function(e){if(void 0===e)throw new Error("You must pass a function when you call 'onLoad'");e()},je.prototype.provide=function(e,t){this.plugins.provide(e,t)},je.prototype.require=function(e,t){if(!this.client)throw new Error("You must call init before requiring a plugin");this.plugins.require(e,g(g({},t),{client:this.client}))},je.prototype.callPlugin=function(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];(n=this.plugins).execute.apply(n,a([e,t],r))},je.prototype.reset=function(){this.client=void 0,this.plugins=new _e,this.params={}},je);function je(){this.plugins=new _e,this.params={}}function Ne(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/.exec(e),o=(r[1],r[2]),i=r[3],s=Be[i];if(o&&i)return Be.callPlugin.apply(Be,a([o,i],t));if(s)return s.apply(Be,t);throw new Error('The action "'+e+'" does not exist. Available actions: '+["init","set","send","onLoad","callPlugin","reset","require","provide"].join(", ")+".")}var He,Me,Ue,Be=new De,Qe=Object.freeze({__proto__:null,CoveoUA:De,coveoua:Be,handleOneAnalyticsEvent:Ne,default:Ne});(Ue=Me=Me||{}).interfaceLoad="interfaceLoad",Ue.interfaceChange="interfaceChange",Ue.didyoumeanAutomatic="didyoumeanAutomatic",Ue.didyoumeanClick="didyoumeanClick",Ue.resultsSort="resultsSort",Ue.searchboxSubmit="searchboxSubmit",Ue.searchboxClear="searchboxClear",Ue.searchboxAsYouType="searchboxAsYouType",Ue.breadcrumbFacet="breadcrumbFacet",Ue.breadcrumbResetAll="breadcrumbResetAll",Ue.documentQuickview="documentQuickview",Ue.documentOpen="documentOpen",Ue.omniboxAnalytics="omniboxAnalytics",Ue.omniboxFromLink="omniboxFromLink",Ue.triggerNotify="notify",Ue.triggerExecute="execute",Ue.triggerQuery="query",Ue.triggerRedirect="redirect",Ue.pagerResize="pagerResize",Ue.pagerNumber="pagerNumber",Ue.pagerNext="pagerNext",Ue.pagerPrevious="pagerPrevious",Ue.pagerScrolling="pagerScrolling",Ue.facetClearAll="facetClearAll",Ue.facetSearch="facetSearch",Ue.facetSelect="facetSelect",Ue.facetSelectAll="facetSelectAll",Ue.facetDeselect="facetDeselect",Ue.facetExclude="facetExclude",Ue.facetUnexclude="facetUnexclude",Ue.facetUpdateSort="facetUpdateSort",Ue.facetShowMore="showMoreFacetResults",Ue.facetShowLess="showLessFacetResults",Ue.queryError="query",Ue.queryErrorBack="errorBack",Ue.queryErrorClear="errorClearQuery",Ue.queryErrorRetry="errorRetry",Ue.recommendation="recommendation",Ue.recommendationInterfaceLoad="recommendationInterfaceLoad";var ze=((He={})[Me.triggerNotify]="queryPipelineTriggers",He[Me.triggerExecute]="queryPipelineTriggers",He[Me.triggerQuery]="queryPipelineTriggers",He[Me.triggerRedirect]="queryPipelineTriggers",He[Me.queryError]="errors",He[Me.queryErrorBack]="errors",He[Me.queryErrorClear]="errors",He[Me.queryErrorRetry]="errors",He[Me.pagerNext]="getMoreResults",He[Me.pagerPrevious]="getMoreResults",He[Me.pagerNumber]="getMoreResults",He[Me.pagerResize]="getMoreResults",He[Me.pagerScrolling]="getMoreResults",He[Me.facetSearch]="facet",He[Me.facetShowLess]="facet",He[Me.facetShowMore]="facet",He[Me.recommendation]="recommendation",He),Ye=(We.prototype.sendEvent=function(){return Promise.resolve()},We.prototype.sendSearchEvent=function(){return Promise.resolve()},We.prototype.sendClickEvent=function(){return Promise.resolve()},We.prototype.sendCustomEvent=function(){return Promise.resolve()},We.prototype.sendViewEvent=function(){return Promise.resolve()},We.prototype.getVisit=function(){return Promise.resolve({id:"",visitorId:""})},We.prototype.getHealth=function(){return Promise.resolve({status:""})},We.prototype.registerBeforeSendEventHook=function(){},We.prototype.addEventTypeMapping=function(){},We);function We(){this.runtime=new he,this.currentVisitorId=""}function Ge(e){var n,t=e.map(function(e){return e.replace(/;/g,"")});return function e(t){var n=t.join(";");return n.length<=256?n:e(t.slice(1))}((n="",t.filter(function(e){var t=e!==n;return n=e,t})))}function Ke(e){var t="string"==typeof e.partialQueries?e.partialQueries:Ge(e.partialQueries),n="string"==typeof e.suggestions?e.suggestions:Ge(e.suggestions);return g(g({},e),{partialQueries:t,suggestions:n})}var Je=($e.prototype.disable=function(){this.coveoAnalyticsClient instanceof ge&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ye},$e.prototype.enable=function(){this.coveoAnalyticsClient=new ge(this.opts)},$e.prototype.logInterfaceLoad=function(){return this.logSearchEvent(Me.interfaceLoad)},$e.prototype.logRecommendationInterfaceLoad=function(){return this.logSearchEvent(Me.recommendationInterfaceLoad)},$e.prototype.logRecommendation=function(){return this.logCustomEvent(Me.recommendation)},$e.prototype.logFetchMoreResults=function(){return this.logCustomEvent(Me.pagerScrolling,{type:"getMoreResults"})},$e.prototype.logInterfaceChange=function(e){return this.logSearchEvent(Me.interfaceChange,e)},$e.prototype.logDidYouMeanAutomatic=function(){return this.logSearchEvent(Me.didyoumeanAutomatic)},$e.prototype.logDidYouMeanClick=function(){return this.logSearchEvent(Me.didyoumeanClick)},$e.prototype.logResultsSort=function(e){return this.logSearchEvent(Me.resultsSort,e)},$e.prototype.logSearchboxSubmit=function(){return this.logSearchEvent(Me.searchboxSubmit)},$e.prototype.logSearchboxClear=function(){return this.logSearchEvent(Me.searchboxClear)},$e.prototype.logSearchboxAsYouType=function(){return this.logSearchEvent(Me.searchboxAsYouType)},$e.prototype.logBreadcrumbFacet=function(e,t){return this.logFacetSearchEvent(Me.breadcrumbFacet,e,t)},$e.prototype.logBreadcrumbResetAll=function(){return this.logSearchEvent(Me.breadcrumbResetAll)},$e.prototype.logDocumentQuickview=function(e,t){return this.logClickEvent(Me.documentQuickview,e,t)},$e.prototype.logDocumentOpen=function(e,t){return this.logClickEvent(Me.documentOpen,e,t)},$e.prototype.logOmniboxAnalytics=function(e){return this.logSearchEvent(Me.omniboxAnalytics,Ke(e))},$e.prototype.logOmniboxFromLink=function(e){return this.logSearchEvent(Me.omniboxFromLink,Ke(e))},$e.prototype.logTriggerNotify=function(e){return this.logCustomEvent(Me.triggerNotify,e)},$e.prototype.logTriggerExecute=function(e){return this.logCustomEvent(Me.triggerExecute,e)},$e.prototype.logTriggerQuery=function(){var e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(Me.triggerQuery,e)},$e.prototype.logTriggerRedirect=function(e){var t=g(g({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(Me.triggerRedirect,t)},$e.prototype.logPagerResize=function(e){return this.logCustomEvent(Me.pagerResize,e)},$e.prototype.logPagerNumber=function(e){return this.logCustomEvent(Me.pagerNumber,e)},$e.prototype.logPagerNext=function(e){return this.logCustomEvent(Me.pagerNext,e)},$e.prototype.logPagerPrevious=function(e){return this.logCustomEvent(Me.pagerPrevious,e)},$e.prototype.logPagerScrolling=function(){return this.logCustomEvent(Me.pagerScrolling)},$e.prototype.logFacetClearAll=function(e,t){return this.logFacetSearchEvent(Me.facetClearAll,e,t)},$e.prototype.logFacetSearch=function(e,t){return this.logFacetSearchEvent(Me.facetSearch,e,t)},$e.prototype.logFacetSelect=function(e,t){return this.logFacetSearchEvent(Me.facetSelect,e,t)},$e.prototype.logFacetDeselect=function(e,t){return this.logFacetSearchEvent(Me.facetDeselect,e,t)},$e.prototype.logFacetExclude=function(e,t){return this.logFacetSearchEvent(Me.facetExclude,e,t)},$e.prototype.logFacetUnexclude=function(e,t){return this.logFacetSearchEvent(Me.facetUnexclude,e,t)},$e.prototype.logFacetSelectAll=function(e,t){return this.logFacetSearchEvent(Me.facetSelectAll,e,t)},$e.prototype.logFacetUpdateSort=function(e,t){return this.logFacetSearchEvent(Me.facetUpdateSort,e,t)},$e.prototype.logFacetShowMore=function(e){return this.logCustomEvent(Me.facetShowMore,e)},$e.prototype.logFacetShowLess=function(e){return this.logCustomEvent(Me.facetShowLess,e)},$e.prototype.logQueryError=function(e){return this.logCustomEvent(Me.queryError,e)},$e.prototype.logQueryErrorBack=function(){return m(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,this.logCustomEvent(Me.queryErrorBack)];case 1:return e.sent(),[2,this.logSearchEvent(Me.queryErrorBack)]}})})},$e.prototype.logQueryErrorRetry=function(){return m(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,this.logCustomEvent(Me.queryErrorRetry)];case 1:return e.sent(),[2,this.logSearchEvent(Me.queryErrorRetry)]}})})},$e.prototype.logQueryErrorClear=function(){return m(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,this.logCustomEvent(Me.queryErrorClear)];case 1:return e.sent(),[2,this.logSearchEvent(Me.queryErrorClear)]}})})},$e.prototype.logCustomEvent=function(e,t){var n=g(g({},this.provider.getBaseMetadata()),t),r=g(g({},this.getOrigins()),{eventType:ze[e],eventValue:e,lastSearchQueryUid:this.provider.getSearchUID(),customData:n});return this.coveoAnalyticsClient.sendCustomEvent(r)},$e.prototype.logCustomEventWithType=function(e,t,n){var r=g(g({},this.provider.getBaseMetadata()),n),o=g(g({},this.getOrigins()),{eventType:t,eventValue:e,lastSearchQueryUid:this.provider.getSearchUID(),customData:r});return this.coveoAnalyticsClient.sendCustomEvent(o)},$e.prototype.logSearchEvent=function(e,t){return this.coveoAnalyticsClient.sendSearchEvent(this.getBaseSearchEventRequest(e,t))},$e.prototype.logClickEvent=function(e,t,n,r){var o=g(g(g({},this.provider.getBaseMetadata()),n),r),i=g(g(g({},t),this.getOrigins()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e,customData:o});return this.coveoAnalyticsClient.sendClickEvent(i)},$e.prototype.logFacetSearchEvent=function(e,t,n){var r=g(g({},this.getBaseSearchEventRequest(e,t)),{facetState:n});return this.coveoAnalyticsClient.sendSearchEvent(r)},$e.prototype.getBaseSearchEventRequest=function(e,t){var n=g(g({},this.provider.getBaseMetadata()),t);return g(g(g({},this.provider.getSearchEventRequestPayload()),this.getOrigins()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),customData:n,actionCause:e})},$e.prototype.getOrigins=function(){return{originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}},$e);function $e(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=!1===e.enableAnalytics?new Ye:new ge(e)}var Xe=Object.freeze({__proto__:null,analytics:we,donottrack:be,history:F,SimpleAnalytics:Qe,storage:k,CoveoAnalyticsClient:ge,CoveoUA:De,handleOneAnalyticsEvent:Ne,CoveoSearchPageClient:Je});window.Promise instanceof Function||console.error('This script uses window.Promise which is not supported in your browser. Consider adding a polyfill like "es6-promise".'),window.fetch instanceof Function||console.error('This script uses window.fetch which is not supported in your browser. Consider adding a polyfill like "fetch".');var Ze=self.coveoua||Ne;self.coveoua=Ne,self.coveoanalytics=Xe,Ze.q&&a(Ze.q.filter(function(e){return"init"===e[0]}),Ze.q.filter(function(e){return"init"!==e[0]})).forEach(function(e){return Ne.apply(void 0,e)});return self.coveoua});
